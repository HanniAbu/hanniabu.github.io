"use strict";function hideLoadScreen(){setTimeout(function(){loadScreen.addClass("fadeOut")},t1),setTimeout(function(){loadScreen.addClass("hide")},t2)}function showStartScreen(){setTimeout(function(){startScreen.removeClass("hide")},t1)}function hideStartScreen(){startScreen.addClass("fadeOut"),setTimeout(function(){startScreen.addClass("hide")},t2)}function showPlayScreen(){playScreen.addClass("fadeIn"),setTimeout(function(){playScreen.removeClass("hide")},t3)}function hidePlayScreen(){playScreen.addClass("fadeOut"),setTimeout(function(){playScreen.addClass("hide")},t2)}function showHighScoreScreen(){highScoreScreen.addClass("slideInUp"),highScoreScreen.removeClass("hide"),setTimeout(function(){highScoreScreen.removeClass("slideInUp")},t1)}function hideHighScoreScreen(){highScoreScreen.addClass("slideOutDown"),setTimeout(function(){highScoreScreen.addClass("hide"),highScoreScreen.removeClass("slideOutDown")},t1)}function showDimScreen(){dimScreen.addClass("fadeInHalf"),dimScreen.removeClass("hide"),setTimeout(function(){dimScreen.removeClass("fadeInHalf")},t1)}function hideDimScreen(){dimScreen.addClass("fadeOutHalf"),setTimeout(function(){dimScreen.addClass("hide"),dimScreen.removeClass("fadeOutHalf")},t1)}function showNewGameScreen(){newGameScreen.addClass("slideInDown"),newGameScreen.removeClass("hide"),setTimeout(function(){newGameScreen.removeClass("slideInDown")},t1)}function hideNewGameScreen(){newGameScreen.addClass("slideOutUp"),setTimeout(function(){newGameScreen.addClass("hide"),newGameScreen.removeClass("slideOutUp")},t1)}function showGameOverScreen(){gameOverScreen.addClass("slideInDown"),gameOverScreen.removeClass("hide"),setTimeout(function(){gameOverScreen.removeClass("slideInDown")},t1)}function hideGameOverScreen(){gameOverScreen.addClass("slideOutUp"),setTimeout(function(){gameOverScreen.addClass("hide"),gameOverScreen.removeClass("slideOutUp")},t1)}function showNewHighScoreScreen(){newHighScoreValue.html(score.html()),newHighScoreScreen.addClass("slideInDown"),newHighScoreScreen.removeClass("hide"),setTimeout(function(){newHighScoreScreen.removeClass("slideInDown")},t1)}function hideNewHighScoreScreen(){newHighScoreScreen.addClass("slideOutUp"),setTimeout(function(){newHighScoreScreen.addClass("hide"),newHighScoreScreen.removeClass("slideOutUp")},t1)}function enableButtons(){copyButton.removeAttr("disabled"),pasteButton.removeAttr("disabled")}function disableButtons(){copyButton.attr("disabled",!0),pasteButton.attr("disabled",!0)}function startNewShotclock(){timer=new Timer,timer.start({countdown:!0,startValues:{seconds:gameLength}}),timer.getTimeValues().seconds>9?time.html("0:"+timer.getTimeValues().seconds):time.html("0:0"+timer.getTimeValues().seconds),timer.addEventListener("secondsUpdated",function(e){timer.getTimeValues().seconds>9?time.html("0:"+timer.getTimeValues().seconds):time.html("0:0"+timer.getTimeValues().seconds)}),timer.addEventListener("targetAchieved",function(e){time.html("0:00"),endGame()})}function startGame(){runCountdown(),setTimeout(function(){startNewShotclock()},3100)}function changeCount(e){countdown.html(e)}function runCountdown(){changeCount("3"),countdown.removeClass("hide"),setTimeout(function(){changeCount("2")},1100),setTimeout(function(){changeCount("1")},2100),setTimeout(function(){countdown.addClass("hide"),score.removeClass("hide"),enableButtons()},3100)}function resetTimer(){timer.stop(),time.html("0:15")}function resetGame(){score.html("1").addClass("hide"),pasteValue.html("1"),disableButtons(),resetTimer()}function endGame(){disableButtons(),showDimScreen(),finalScore.html(score.html()),checkHighScore()}function sortArray(e,t){return e=e[1],t=t[1],e==t?0:t>e?1:-1}function saveHighScoreArray(){localStorage.setItem("high-scores",JSON.stringify(highScores))}function loadHighScoreArray(){localStorage.getItem("high-scores")&&(highScores=JSON.parse(localStorage.getItem("high-scores")))}function checkHighScore(){highScores.length<10?showNewHighScoreScreen():highScores[highScores.length-1][1]<Number(score.html())?showNewHighScoreScreen():showGameOverScreen()}function saveHighScore(){var e=newHighScoreName.val().replace(/[^\w]/g,"").toLowerCase().slice(0,12),t=Number(newHighScoreValue.html());highScores.length>9&&highScores.pop(),highScores[highScores.length]=[e,t],highScores.sort(sortArray),saveHighScoreArray(),loadHighestScore(),fillHighScoreTable()}function loadHighestScore(){localStorage.getItem("high-scores")&&currentHighScore.html(highScores[0][1])}function fillHighScoreTable(){if(localStorage.getItem("high-scores")){var e=0,t=highScores.length,n=document.createDocumentFragment();for(e;t>e;e++){var o=$("<tr/>");o.html("<td>"+(e+1)+"</td><td>"+highScores[e][0]+"</td><td>"+highScores[e][1]+"</td>"),n.appendChild(o[0])}highScoreTable.html(n)}}var loadScreen=$("#load-screen"),highScoreScreen=$("#high-score-screen"),newGameScreen=$("#new-game-screen"),newHighScoreScreen=$("#new-high-score-screen"),gameOverScreen=$("#game-over-screen"),dimScreen=$("#dim-screen"),startScreen=$("#start-screen"),playScreen=$("#play-screen"),playButton=$("#play-button"),startButton=$("#start-button"),retryButton=$("#retry-button"),highScoresButton=$(".high-scores-button"),closeHighScoresButton=$("#close-high-scores"),newGameButton=$("#new-game-button"),copyButton=$("#copy-button"),pasteButton=$("#paste-button"),saveHighScoreButton=$("#save-high-score-button"),newHighScoreName=$("#new-high-score-name"),newHighScoreValue=$("#new-high-score-value"),time=$("#time"),pasteValue=$("#paste-value"),currentHighScore=$("#current-high-score"),score=$("#score"),finalScore=$("#final-score"),countdown=$("#countdown"),highScoreTable=$("#high-score-table"),timer=new Timer,gameLength=15,t1=500,t2=1e3,t3=250,highScores=[];!function(){$(document).ready(function(){setTimeout(function(){hideLoadScreen(),showStartScreen()},800),loadHighScoreArray(),loadHighestScore(),fillHighScoreTable()}),startButton.click(function(){hideStartScreen(),showPlayScreen(),showDimScreen(),showNewGameScreen()}),highScoresButton.click(function(){showDimScreen(),showHighScoreScreen()}),closeHighScoresButton.click(function(){hideHighScoreScreen(),newGameScreen.hasClass("hide")&&hideDimScreen()}),playButton.click(function(){hideNewGameScreen(),hideDimScreen(),startGame()}),newGameButton.click(function(){"0:15"!==time.html()&&(showDimScreen(),showNewGameScreen(),resetGame())}),copyButton.click(function(){pasteValue.html(score.html()),disableButtons(),setTimeout(function(){enableButtons()},800)}),pasteButton.click(function(){var e=Number(score.html())+Number(pasteValue.html());score.html(e)}),saveHighScoreButton.click(function(){saveHighScore(),hideNewHighScoreScreen(),setTimeout(function(){showGameOverScreen()},400)}),retryButton.click(function(){hideGameOverScreen(),setTimeout(function(){showNewGameScreen(),resetGame()},400)})}();